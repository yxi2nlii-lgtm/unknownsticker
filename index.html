<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pink Sticker â€” 90Â°</title>

    <style>
        :root {
            --line-thickness: 10px;
            --eye-height: 35px;
            --face-color: transparent;
            --max-move-distance: 30px;
            --max-squeeze-scale: 0.90;
            --max-stretch-scale: 1.05;
            --face-shift-ratio: 0.15; 
            --face-padding: 50px; 
        }

        body, html {
            margin: 0;
            padding: 0;
            height: 100%;
            width: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            background-color: #FFE4EF;  /* ğŸŒ¸ Pink èƒŒæ™¯ */
            padding: var(--face-padding);
            box-sizing: border-box;
            position: relative;
            overflow: hidden;
            font-family: sans-serif;
        }

        #blynk-status {
            position: fixed;
            bottom: 8px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 11px;
            color: #444;
            opacity: 0.8;
            pointer-events: none;
        }

        .emoji-container {
            width: 65vw;        
            max-width: 260px;    
            aspect-ratio: 1 / 1;
            background-color: var(--face-color);
            border-radius: 50%;
            position: relative;
            cursor: pointer;
            transition: transform 0.1s ease-out,
                        box-shadow 0.1s ease-out,
                        background-color 0.5s ease;
            overflow: hidden;
        }

        .features-wrapper {
            position: absolute;
            top: 0; left: 0;
            width: 100%; height: 100%;
            transition: transform 0.1s ease-out;
        }

        .eye, .mouth {
            position: absolute;
            background-color: black;
        }

        .eye {
            width: var(--line-thickness);
            height: var(--eye-height);
            top: 35%;
            animation: blink 4s infinite;
        }

        .left-eye  { left: 35%; transform: translateX(-50%); }
        .right-eye { right: 35%; transform: translateX(50%); }

        .mouth {
            width: 80px;
            height: 80px;
            border: var(--line-thickness) solid black;
            border-color: transparent transparent black transparent;
            border-radius: 50%;
            bottom: 25%;
            right: 30%;
            transform: rotate(-45deg);
            background-color: transparent;
        }

        @keyframes blink {
            0%,45%,100% { height: var(--eye-height); }
            50%,52%     { height: var(--line-thickness); }
        }

        @keyframes shake {
            0% { transform: scale(1); }
            50% { transform: scale(0.97); }
            100% { transform: scale(1); }
        }
        
        .click-shake { animation: shake 0.2s ease-in-out; }
    </style>
</head>

<body>
    <div id="blynk-status">Blynk Status: Idle</div>

    <div class="emoji-container" id="emojiContainer">
        <div class="features-wrapper" id="featuresWrapper">
            <div class="eye left-eye"></div>
            <div class="eye right-eye"></div>
            <div class="mouth"></div>
        </div>
    </div>

<script>

    /* ğŸŒ¸ Pink Sticker => å‘é€ 90Â° */

    const AUTH_TOKEN   = 'OqSFS2EppKQRi0DYBOTFNEQgW7pljRjT';
    const BLYNK_HOST   = 'blynk.cloud';
    const VIRTUAL_PIN  = 'V1';

    const PICKUP_ANGLE = 90;   // ğŸŒ¸ğŸŒ¸ğŸŒ¸ Pink å›ºå®šå‘é€ 90Â°
    const RETURN_ANGLE = 0;

    const container = document.getElementById('emojiContainer');
    const wrapper   = document.getElementById('featuresWrapper');
    const root      = document.documentElement;
    const statusEl  = document.getElementById('blynk-status');

    /* ===== Blynk èˆµæœºè§¦å‘å‡½æ•°ï¼ˆå‘é€ 90Â°ï¼‰ ===== */
    async function sendCommand(value) {
        const url_push  = `https://${BLYNK_HOST}/external/api/update?token=${AUTH_TOKEN}&${VIRTUAL_PIN}=${value}`;
        const url_reset = `https://${BLYNK_HOST}/external/api/update?token=${AUTH_TOKEN}&${VIRTUAL_PIN}=${RETURN_ANGLE}`;

        statusEl.innerText = `Blynk Status: Sending ${value}Â°...`;

        try {
            const res_push = await fetch(url_push);
            if (!res_push.ok) {
                statusEl.innerText = `Blynk Status: PUSH Failed`;
                return;
            }

            const res_reset = await fetch(url_reset);
            statusEl.innerText = res_reset.ok
                ? `Blynk Status: 90Â° sent & reset to 0`
                : `Blynk Status: Reset Failed`;

        } catch (e) {
            statusEl.innerText = `Blynk Status: Network Error`;
        }
    }

    /* ========== ç‚¹å‡»é€»è¾‘ï¼ˆè§¦å‘è¡¨æƒ… + èˆµæœºï¼‰ ========== */

    function handleClickEffect(e) {
        e.preventDefault();

        container.classList.remove('click-shake');
        void container.offsetWidth;
        container.classList.add('click-shake');

        // âœ¨ èˆµæœºåŠ¨ä½œ (90Â°)
        sendCommand(PICKUP_ANGLE);
    }

    /* === å¯åŠ¨ç›‘å¬ === */
    container.addEventListener('click', handleClickEffect);
    container.addEventListener('touchstart', handleClickEffect, { passive:false });

</script>
</body>
</html>
